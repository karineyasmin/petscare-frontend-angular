<div class="pet-registration-container">
  <h2 class="page-title">
    <mat-icon class="title-icon">pets</mat-icon>
    <span>Cadastro de Pet</span>
  </h2>
  
  <!-- Mensagens de feedback -->
  <div class="messages-container">
    <mat-card *ngIf="success" class="success-message animate__animated animate__fadeIn">
      <mat-card-content>
        <mat-icon color="primary">check_circle</mat-icon>
        <span>{{ success }}</span>
      </mat-card-content>
    </mat-card>

    <mat-card *ngIf="error" class="error-message animate__animated animate__fadeIn">
      <mat-card-content>
        <mat-icon color="warn">error</mat-icon>
        <span>{{ error }}</span>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Formulário dividido em seções -->
  <form [formGroup]="petForm" (ngSubmit)="onSubmit()" class="pet-form">
    <!-- Seção de Informações Básicas -->
    <div class="form-section">
      <h3 class="section-title">
        <mat-icon>info</mat-icon>
        <span>Informações Básicas</span>
      </h3>
      
      <div class="form-grid">
        <mat-form-field appearance="outline">
          <mat-label>Nome do Pet</mat-label>
          <input matInput formControlName="name" placeholder="Ex: Rex">
          <mat-icon matSuffix>pets</mat-icon>
          <mat-error *ngIf="petForm.get('name')?.hasError('required')">Nome é obrigatório</mat-error>
          <mat-error *ngIf="petForm.get('name')?.hasError('maxlength')">Nome não pode ter mais de 100 caracteres</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Espécie</mat-label>
          <mat-select formControlName="species">
            <mat-option value="">Selecione</mat-option>
            <mat-option value="cat">Gato</mat-option>
            <mat-option value="dog">Cachorro</mat-option>
          </mat-select>
          <mat-icon matSuffix>category</mat-icon>
          <mat-error *ngIf="petForm.get('species')?.hasError('required')">Espécie é obrigatória</mat-error>
        </mat-form-field>
      </div>

      <div class="form-grid">
        <mat-form-field appearance="outline">
          <mat-label>Idade (anos)</mat-label>
          <input matInput type="number" formControlName="age" placeholder="Ex: 3">
          <mat-icon matSuffix>calendar_today</mat-icon>
          <mat-error *ngIf="petForm.get('age')?.hasError('required')">Idade é obrigatória</mat-error>
          <mat-error *ngIf="petForm.get('age')?.hasError('min')">Idade deve ser maior ou igual a 0</mat-error>
          <mat-error *ngIf="petForm.get('age')?.hasError('max')">Idade deve ser menor ou igual a 30</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Peso (kg)</mat-label>
          <input matInput type="number" step="0.1" formControlName="weight" placeholder="Ex: 5.5">
          <mat-icon matSuffix>monitor_weight</mat-icon>
          <mat-error *ngIf="petForm.get('weight')?.hasError('required')">Peso é obrigatório</mat-error>
          <mat-error *ngIf="petForm.get('weight')?.hasError('min')">Peso deve ser maior ou igual a 0.1</mat-error>
          <mat-error *ngIf="petForm.get('weight')?.hasError('max')">Peso deve ser menor ou igual a 100</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>ID da Raça</mat-label>
          <input matInput formControlName="breedId" placeholder="ID da raça encontrada na pesquisa">
          <mat-icon matSuffix>qr_code</mat-icon>
          <mat-hint>
            <a routerLink="/breed-search" class="hint-link">
              <mat-icon class="hint-icon">search</mat-icon>
              <span>Visite a página "Buscar Raça" para encontrar o ID correto</span>
            </a>
          </mat-hint>
          <mat-error *ngIf="petForm.get('breedId')?.hasError('required')">ID da Raça é obrigatório</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Sexo</mat-label>
          <mat-select formControlName="sex">
            <mat-option value="male">Macho</mat-option>
            <mat-option value="female">Fêmea</mat-option>
          </mat-select>
          <mat-icon matSuffix>wc</mat-icon>
          <mat-error *ngIf="petForm.get('sex')?.hasError('required')">Sexo é obrigatório</mat-error>
        </mat-form-field>
      </div>
    </div>

    <!-- Seção de Informações do Tutor -->
    <div class="form-section">
      <h3 class="section-title">
        <mat-icon>person</mat-icon>
        <span>Informações do Tutor</span>
      </h3>
      
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nome do Tutor</mat-label>
          <input matInput formControlName="owner" placeholder="Nome completo">
          <mat-icon matSuffix>person</mat-icon>
          <mat-error *ngIf="petForm.get('owner')?.hasError('required')">Nome do tutor é obrigatório</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>E-mail do Tutor</mat-label>
          <input matInput type="email" formControlName="email" placeholder="exemplo@email.com">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="petForm.get('email')?.hasError('required')">Email é obrigatório</mat-error>
          <mat-error *ngIf="petForm.get('email')?.hasError('email')">Email inválido</mat-error>
        </mat-form-field>
      </div>
    </div>

    <!-- Botões de ação -->
    <div class="button-container">
      <button type="button" mat-stroked-button color="accent" (click)="navigateToHome()">
        <mat-icon>arrow_back</mat-icon> 
        <span>Voltar</span>
      </button>
      
      <button type="submit" mat-raised-button color="primary" [disabled]="petForm.invalid || loading">
        <mat-icon>save</mat-icon>
        <span>{{ loading ? 'Cadastrando...' : 'Cadastrar Pet' }}</span>
      </button>
    </div>
  </form>
</div>